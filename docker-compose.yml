version: '3.8'

services:
  api:
    build: .
    container_name: training-platform-api
    restart: unless-stopped
    ports:
      - "5010:5010"
    environment:
      MONGODB_URI: mongodb://harx:ix5S3vU6BjKn4MHp@207.180.226.2:27017/V25_HarxProd
      JWT_SECRET: your_jwt_secret_here_make_it_long_and_secure_change_this_in_production
      CORS_ORIGIN: https://training.harx.ai,https://v25.harx.ai
      LOG_LEVEL: INFO
    networks:
      - training-platform-network
    volumes:
      - ./uploads:/app/uploads

  frontend:
    build: ../platform_training_frontend
    container_name: training-platform-frontend
    restart: unless-stopped
    ports:
      - "5190:5190"
    environment:
      VITE_API_URL: https://prod-api-training.harx.ai
      NEXT_PUBLIC_API_URL: https://prod-api-training.harx.ai
    depends_on:
      - api
    networks:
      - training-platform-network

networks:
  training-platform-network:
    driver: bridge
