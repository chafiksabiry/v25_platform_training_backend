version: '3.8'

services:
  api:
    build: .
    container_name: training-platform-api
    restart: unless-stopped
    ports:
      - "8080:8080"
    environment:
      MONGODB_URI: mongodb://harx:gcZ62rl8hoME@38.242.208.242:27018/V25_CompanySearchWizard
      JWT_SECRET: your_jwt_secret_here_make_it_long_and_secure_change_this_in_production
      CORS_ORIGIN: http://localhost:3000
      LOG_LEVEL: INFO
    networks:
      - training-platform-network
    volumes:
      - ./uploads:/app/uploads

  frontend:
    build: ../platform_training_frontend
    container_name: training-platform-frontend
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      NEXT_PUBLIC_API_URL: http://localhost:8080
    depends_on:
      - api
    networks:
      - training-platform-network

networks:
  training-platform-network:
    driver: bridge
